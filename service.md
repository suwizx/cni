# Service

### ‚úÖ Checklist: Services Configuration

| **Device** | **Task** | **Status** |
| --- | --- | --- |
| **Router 1** | [ ] ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô `ip dns server` ‡πÅ‡∏•‡∏∞ `ip domain-lookup` |  |
| **Router 1** | [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Public DNS (`ip name-server 8.8.8.8`) |  |
| **Router 1** | [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á Host Map `SW.itkmitl.lab` -> IP Switch (`172.61.245.158`) |  |
| **Router 1** | [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á Host Map `web.itkmitl.lab` -> IP Web (`10.70.38.253`) |  |
| **Ubuntu 1** | [ ] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á `tftpd-hpa` ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ (`--create`) |  |
| **Router 1** | [ ] Backup config ‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà Ubuntu 1 (`copy run tftp`) |  |
| **Switch** | [ ] ‡∏ï‡∏±‡πâ‡∏á Password ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Line VTY (Telnet) |  |
| **Switch** | [ ] ‡∏ï‡∏±‡πâ‡∏á Enable Secret (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ) |  |
| **Ubuntu 2** | [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Telnet ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Switch |  |
| **Ubuntu 2** | [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Curl ‡πÄ‡∏ß‡πá‡∏ö `web.itkmitl.lab` |  |
| **Ubuntu 1** | [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Ping `SW.itkmitl.lab` ‡πÅ‡∏•‡∏∞ Curl `www.google.com` |  |

---

### üõ†Ô∏è ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (Step-by-Step)

### 1. Config DNS Service ‡∏ö‡∏ô Router 1

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Router 1 ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πá‡∏ö (Domain Name) ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ç‡πà‡∏≤‡∏¢

Bash

`! ‡πÄ‡∏Ç‡πâ‡∏≤ Config Router 1
conf t

! 1. ‡πÄ‡∏õ‡∏¥‡∏î DNS Server
ip dns server
ip domain-lookup

! 2. ‡∏ä‡∏µ‡πâ DNS ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤ Google ‡πÑ‡∏î‡πâ)
ip name-server 8.8.8.8

! 3. Map ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Lab
ip host SW.itkmitl.lab 172.61.245.158
ip host web.itkmitl.lab 10.70.38.253

exit`

*(‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡πà‡∏≤ "‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Router2 Relay DNS" ‡πÅ‡∏ï‡πà‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Ubuntu 1 ‡∏ä‡∏µ‡πâ DNS ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Router 1 (192.168.1.1) ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ó‡∏µ‡πà Router 1 ‡∏Ñ‡∏£‡∏±‡∏ö)*

### 2. Config TFTP Server ‡∏ö‡∏ô Ubuntu 1

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå Backup ‡∏à‡∏≤‡∏Å Router ‡πÑ‡∏î‡πâ

Bash

`# 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Service
sudo apt-get update
sudo apt-get install tftpd-hpa -y

# 2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ Upload ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ
sudo nano /etc/default/tftpd-hpa

# ‡πÅ‡∏Å‡πâ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î TFTP_OPTIONS ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ (‡πÄ‡∏ï‡∏¥‡∏° --create):
# TFTP_OPTIONS="--secure --create"

# (‡∏Å‡∏î Ctrl+O ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Save -> Enter -> Ctrl+X ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å)

# 3. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ
sudo chown tftp:tftp /srv/tftp
sudo chmod 777 /srv/tftp

# 4. Restart Service
sudo service tftpd-hpa restart`

### 3. Backup Config ‡∏à‡∏≤‡∏Å Router 1 ‡πÑ‡∏õ Ubuntu 1

‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Router 1** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå

Bash

`! ‡∏™‡∏±‡πà‡∏á Copy running-config ‡πÑ‡∏õ TFTP
copy running-config tftp:

! (‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö)
! Address or name of remote host []? -> 172.61.245.130 (IP Ubuntu 1)
! Destination filename [router1-confg]? -> (‡∏Å‡∏î Enter ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà)`

### 4. Config Telnet ‡∏ö‡∏ô Switch

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Ubuntu 2 ‡∏£‡∏µ‡πÇ‡∏°‡∏ó‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏î‡πâ

Bash

`! ‡πÄ‡∏Ç‡πâ‡∏≤ Config Switch
conf t

! 1. ‡∏ï‡∏±‡πâ‡∏á Enable Secret (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô‡∏ö‡∏≤‡∏á‡∏£‡∏∏‡πà‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤)
enable secret cisco

! 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Line VTY (0-4)
line vty 0 4
 password cisco
 login
 transport input telnet
 exit

exit`

---

### üß™ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö (Verification Commands)

**‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Ubuntu 1:**

1. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Ping ‡∏ä‡∏∑‡πà‡∏≠ Switch:**Bash
    
    `ping SW.itkmitl.lab -c 4
    # ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏à‡∏≠ IP 172.61.245.158`
    
2. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å‡πÄ‡∏ô‡πá‡∏ï‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠:**Bash
    
    `curl -I www.google.com
    # ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô HTTP/2 200 ‡∏´‡∏£‡∏∑‡∏≠ 301 (‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß)`
    
3. **‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏ü‡∏•‡πå Backup:**Bash
    
    `ls -l /srv/tftp/
    # ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå config ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å Router`
    

**‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Ubuntu 2:**

1. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô:**Bash
    
    `curl http://web.itkmitl.lab
    # ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ Code HTML ‡∏´‡∏£‡∏∑‡∏≠ Connect ‡πÑ‡∏î‡πâ`
    
2. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Telnet:**Bash
    
    `telnet 172.61.245.158
    # ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà Password (‡πÉ‡∏™‡πà cisco)`
    

### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ó‡∏≥‡∏ó‡∏µ‡πà Ubuntu 1) DNS ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠

‡πÉ‡∏´‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤ DNS ‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå Config ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏Ñ‡∏£‡∏±‡∏ö:

Bash

`# 1. (‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å) ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô
sudo cp /etc/resolv.conf /etc/resolv.conf.bak

# 2. ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô link) ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏´‡∏≤ Router 1
sudo rm /etc/resolv.conf
echo "nameserver 192.168.1.1" | sudo tee /etc/resolv.conf`